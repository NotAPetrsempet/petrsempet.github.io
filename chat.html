<title>Спроси у мага</title>
<body style="background-color: lightgray;">
  
  <div style="height: 90px; background-color: white; position: fixed; bottom: 0px; left: 0px; word-break: auto;" id="block"><input id="msg" style="word-break: auto; font-size: 14px; padding:10px; border-radius: 10px; width: 300px;" placeholder="Введите сообщение..."><button style="background-color: lightgreen; left-padding: 10px; height: 40px; border-radius: 10px;" onclick="send()">Отправить</button></div>
<script>
  var name = "";
  block.style.width = window.innerWidth+"px";
  var http = http = new XMLHttpRequest();
http.open('GET', 'https://jsonip.com', true);
  var ip ="человек";
  http.onreadystatechange = function(){
    if (this.status == 200 && this.readyState == 4){
  ip = JSON.parse(http.responseText).ip;
  document.body.innerHTML += '<div style="background-color: white; border-radius: 10px; word-break: auto; width: 200px;"><p style="padding: 5px;">Привет, '+ip+'! Меня зовут Маг. А как тебя зовут?</p></div>';
  
    }
  }
  http.send();
  var last = "";
  function send(){
    if (msg.value == ''){return;}
    var text = "";
    if (last == msg.value){
        text = "Давай другое уже!";
    }else if (msg.value.toLowerCase().IndexOf('когда') != -1){
      var texts = ["Сегодня","Завтра", "Не знаю","Скоро, готовься!","В "+Math.floor(Math.random()*(23-0+1))+" ч. "+Math.floor(Math.random()*(59-0+1))+" мин.","Через "+Math.floor(Math.random()*(23-0+1))+" ч. "+Math.floor(Math.random()*(59-0+1))+" мин.", "В следующем году", "На следующей неделе", "В этом месяце"];
      text = texts[Math.floor(Math.random()*(texts.Length-0+1))];
    }
  document.body.innerHTML += '<div style="margin-right: 0px; margin-left: 0px; background-color: rgb(220, 248, 198); border-radius: 10px; word-break: auto; width: 200px;" ><p style="padding: 5px;">'+msg.value+'</p></div>';
    msg.value = "";
  
  document.body.innerHTML += '<div style="background-color: white; border-radius: 10px; word-break: auto; width: 200px;">'+text+'</p></div>';
  
   }
  </script>
</body>
